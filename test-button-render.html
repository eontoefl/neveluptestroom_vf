<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë²„íŠ¼ ë Œë”ë§ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }
        .result-box {
            background: #16213e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 2px solid #0f3460;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
        }
        .code {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ” renderSchedule í•¨ìˆ˜ í…ŒìŠ¤íŠ¸</h1>

    <div class="result-box">
        <h2>í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h2>
        <button onclick="runTest()">ë Œë”ë§ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
    </div>

    <div class="result-box">
        <h2>ìƒì„±ëœ ë²„íŠ¼ í™•ì¸</h2>
        <div id="scheduleContainer"></div>
    </div>

    <div class="result-box">
        <h2>HTML ì†ŒìŠ¤</h2>
        <div class="code" id="htmlSource"></div>
    </div>

    <div class="result-box">
        <h2>ì½˜ì†” ë¡œê·¸</h2>
        <div class="code" id="consoleLog"></div>
    </div>

    <script src="js/data.js?v=20250209-pages"></script>
    <script>
        const daysOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'];
        let logMessages = [];

        function customLog(msg) {
            logMessages.push(`[${new Date().toLocaleTimeString()}] ${msg}`);
            document.getElementById('consoleLog').textContent = logMessages.join('\n');
            console.log(msg);
        }

        function renderSchedule(program) {
            const container = document.getElementById('scheduleContainer');
            if (!container) {
                customLog('âŒ scheduleContainerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            container.innerHTML = '';
            customLog(`âœ… renderSchedule ì‹œì‘: "${program}"`);
            
            const totalWeeks = program === 'ë‚´ë²¨ì—…ì±Œë¦°ì§€ - Standard' ? 8 : 4;
            customLog(`ì´ ì£¼ì°¨ ìˆ˜: ${totalWeeks}`);
            
            // Week 2ë§Œ ë Œë”ë§
            const week = 2;
            const weekBlock = document.createElement('div');
            weekBlock.className = 'week-block';
            weekBlock.style.marginBottom = '20px';
            
            const weekTitle = document.createElement('div');
            weekTitle.style.fontSize = '20px';
            weekTitle.style.fontWeight = 'bold';
            weekTitle.style.marginBottom = '10px';
            weekTitle.textContent = `Week ${week}`;
            
            const daysGrid = document.createElement('div');
            daysGrid.style.display = 'grid';
            daysGrid.style.gridTemplateColumns = 'repeat(6, 1fr)';
            daysGrid.style.gap = '10px';
            
            // ìš”ì¼ë³„ ë²„íŠ¼ ìƒì„±
            daysOfWeek.forEach(day => {
                const dayButton = document.createElement('div');
                dayButton.style.padding = '15px';
                dayButton.style.background = day === 'í™”' ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#3a3f5c';
                dayButton.style.borderRadius = '10px';
                dayButton.style.cursor = 'pointer';
                dayButton.style.textAlign = 'center';
                dayButton.style.transition = 'all 0.3s';
                
                customLog(`ğŸ”§ ë²„íŠ¼ ìƒì„±: Week ${week}, Day "${day}"`);
                
                dayButton.onclick = () => {
                    customLog(`ğŸ–±ï¸ í´ë¦­ë¨: Week ${week}, Day "${day}"`);
                    alert(`Week ${week} - ${day}ìš”ì¼ í´ë¦­!`);
                };
                
                // í•´ë‹¹ ë‚ ì§œì˜ ê³¼ì œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const taskInfo = getTaskInfo(program, week, day);
                
                dayButton.innerHTML = `
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">${day}</div>
                    <div style="font-size: 14px; color: #aaa;">${taskInfo}</div>
                `;
                
                daysGrid.appendChild(dayButton);
            });
            
            weekBlock.appendChild(weekTitle);
            weekBlock.appendChild(daysGrid);
            container.appendChild(weekBlock);
            
            customLog('âœ… renderSchedule ì™„ë£Œ');
            
            // HTML ì†ŒìŠ¤ í‘œì‹œ
            document.getElementById('htmlSource').textContent = container.innerHTML;
        }

        function getTaskInfo(program, week, day) {
            const weekKey = `week${week}`;
            
            customLog(`ğŸ” getTaskInfo: program="${program}", week=${week}, day="${day}"`);
            
            if (typeof demoTasks === 'undefined') {
                customLog('âŒ demoTasksê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ!');
                return 'ê³¼ì œ ì¤€ë¹„ì¤‘';
            }
            
            if (!demoTasks[program]) {
                customLog(`âŒ demoTasks["${program}"]ê°€ ì—†ìŒ`);
                customLog(`ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¡œê·¸ë¨: ${Object.keys(demoTasks).join(', ')}`);
                return 'ê³¼ì œ ì¤€ë¹„ì¤‘';
            }
            
            if (!demoTasks[program][weekKey]) {
                customLog(`âŒ demoTasks["${program}"]["${weekKey}"]ê°€ ì—†ìŒ`);
                return 'ê³¼ì œ ì¤€ë¹„ì¤‘';
            }
            
            if (!demoTasks[program][weekKey][day]) {
                customLog(`âŒ demoTasks["${program}"]["${weekKey}"]["${day}"]ê°€ ì—†ìŒ`);
                customLog(`ì‚¬ìš© ê°€ëŠ¥í•œ ìš”ì¼: ${Object.keys(demoTasks[program][weekKey]).join(', ')}`);
                return 'ê³¼ì œ ì¤€ë¹„ì¤‘';
            }
            
            const taskDesc = demoTasks[program][weekKey][day].description;
            customLog(`âœ… ê³¼ì œ ì°¾ìŒ: "${taskDesc}"`);
            return taskDesc;
        }

        function runTest() {
            logMessages = [];
            customLog('ğŸš€ í…ŒìŠ¤íŠ¸ ì‹œì‘');
            customLog('');
            
            // demoTasks í™•ì¸
            if (typeof demoTasks === 'undefined') {
                customLog('âŒ demoTasksê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!');
                return;
            }
            customLog('âœ… demoTasks ë¡œë“œë¨');
            
            const programs = Object.keys(demoTasks);
            customLog(`í”„ë¡œê·¸ë¨ ê°œìˆ˜: ${programs.length}`);
            programs.forEach(p => customLog(`  - "${p}"`));
            customLog('');
            
            // Standard í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë Œë”ë§
            renderSchedule('ë‚´ë²¨ì—…ì±Œë¦°ì§€ - Standard');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('load', () => {
            customLog('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            setTimeout(runTest, 500);
        });
    </script>
</body>
</html>
