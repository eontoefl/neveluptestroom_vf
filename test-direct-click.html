<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì§ì ‘ Week 2 í™”ìš”ì¼ í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css?v=104">
    <style>
        #testLog {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 400px;
            background: rgba(0,0,0,0.9);
            color: #0f0;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 10000;
        }
        .log-entry {
            margin: 3px 0;
            padding: 2px 0;
            border-bottom: 1px solid #333;
        }
        .log-error { color: #ff6b6b; }
        .log-success { color: #51cf66; }
        .log-info { color: #74c0fc; }
        #startTest {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10001;
            padding: 20px 40px;
            font-size: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        #startTest:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div id="testLog"></div>
    <button id="startTest">ğŸ§ª Week 2 í™”ìš”ì¼ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜</button>

    <!-- ì‹¤ì œ index.htmlì˜ ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="js/data.js?v=20250209-pages"></script>
    <script src="js/auth.js?v=20250206-001"></script>
    <script src="js/tasks.js?v=001"></script>
    <script src="js/timer.js?v=001"></script>
    <script src="js/navigation.js?v=002"></script>
    <script src="js/vocab-test-logic.js?v=003"></script>
    <script src="js/main.js?v=20250209-vocab-fix"></script>

    <script>
        function log(msg, type = 'info') {
            const logDiv = document.getElementById('testLog');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(msg);
        }

        // ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ í™•ì¸
        window.addEventListener('load', () => {
            log('âœ… í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ', 'success');
            
            // ë³€ìˆ˜ë“¤ í™•ì¸
            setTimeout(() => {
                log('=== ë³€ìˆ˜ ì¡´ì¬ í™•ì¸ ===');
                log(`demoTasks: ${typeof demoTasks}`, typeof demoTasks !== 'undefined' ? 'success' : 'error');
                log(`currentUser: ${typeof currentUser}`, typeof currentUser !== 'undefined' ? 'success' : 'error');
                log(`currentTest: ${typeof currentTest}`, typeof currentTest !== 'undefined' ? 'success' : 'error');
                log(`selectDay: ${typeof selectDay}`, typeof selectDay === 'function' ? 'success' : 'error');
                log(`');
                
                if (typeof demoTasks !== 'undefined') {
                    const programs = Object.keys(demoTasks);
                    log(`í”„ë¡œê·¸ë¨ ê°œìˆ˜: ${programs.length}`, 'info');
                    programs.forEach(p => log(`  - "${p}"`, 'info'));
                }
            }, 1000);
        });

        // í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­
        document.getElementById('startTest').addEventListener('click', () => {
            log('');
            log('ğŸš€ ===  í…ŒìŠ¤íŠ¸ ì‹œì‘ ===', 'success');
            
            // 1. ì„ì‹œ ì‚¬ìš©ì ì„¤ì •
            if (typeof currentUser === 'undefined' || !currentUser) {
                window.currentUser = {
                    name: 'í™ê¸¸ë™',
                    phone: '01012345678',
                    program: 'ë‚´ë²¨ì—…ì±Œë¦°ì§€ - Standard'
                };
                log(`âœ… currentUser ìƒì„±: ${currentUser.name} / ${currentUser.program}`, 'success');
            } else {
                log(`âœ… currentUser ì¡´ì¬: ${currentUser.name} / ${currentUser.program}`, 'success');
            }
            
            // 2. demoTasks í™•ì¸
            if (typeof demoTasks === 'undefined') {
                log('âŒ demoTasksê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ!', 'error');
                return;
            }
            log('âœ… demoTasks ì¡´ì¬', 'success');
            
            // 3. Week 2 í™”ìš”ì¼ ë°ì´í„° í™•ì¸
            const program = currentUser.program;
            const weekKey = 'week2';
            const day = 'í™”';
            
            log(`ğŸ“ ì¡°íšŒ: demoTasks["${program}"]["${weekKey}"]["${day}"]`, 'info');
            
            if (!demoTasks[program]) {
                log(`âŒ í”„ë¡œê·¸ë¨ "${program}" ì—†ìŒ`, 'error');
                log('ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¡œê·¸ë¨:', 'info');
                Object.keys(demoTasks).forEach(p => log(`  - "${p}"`, 'info'));
                return;
            }
            log(`âœ… í”„ë¡œê·¸ë¨ ì¡´ì¬`, 'success');
            
            if (!demoTasks[program][weekKey]) {
                log(`âŒ ${weekKey} ë°ì´í„° ì—†ìŒ`, 'error');
                return;
            }
            log(`âœ… ${weekKey} ë°ì´í„° ì¡´ì¬`, 'success');
            
            if (!demoTasks[program][weekKey][day]) {
                log(`âŒ ${day}ìš”ì¼ ë°ì´í„° ì—†ìŒ`, 'error');
                log(`ì‚¬ìš© ê°€ëŠ¥í•œ ìš”ì¼: ${Object.keys(demoTasks[program][weekKey]).join(', ')}`, 'info');
                return;
            }
            
            const dayTask = demoTasks[program][weekKey][day];
            log(`âœ… í™”ìš”ì¼ ë°ì´í„° ì°¾ìŒ!`, 'success');
            log(`  sections: ${JSON.stringify(dayTask.sections)}`, 'info');
            log(`  pages: "${dayTask.pages}"`, 'info');
            log(`  description: "${dayTask.description}"`, 'info');
            log('');
            
            // 4. selectDay í•¨ìˆ˜ í˜¸ì¶œ
            if (typeof selectDay !== 'function') {
                log('âŒ selectDay í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ!', 'error');
                return;
            }
            
            log('ğŸ¯ selectDay(2, "í™”") í˜¸ì¶œ...', 'success');
            try {
                selectDay(2, 'í™”');
                log('âœ… selectDay í˜¸ì¶œ ì„±ê³µ!', 'success');
            } catch (error) {
                log(`âŒ selectDay í˜¸ì¶œ ì‹¤íŒ¨: ${error.message}`, 'error');
                console.error(error);
            }
        });
    </script>
</body>
</html>
